growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
growth_fitted_5
data$growth_fitted_5
data$growth_fitted_5
data$growth_fitted_log
reset_regr <- plm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
reset_regr <- plm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 + growth_fitted_log, data = data)
summary(reset_regr)
reset_regr <- lm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
reset_regr <- plm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
#resettest(growth ~ privo + lly + btot, data = data, power = 2:4)
sum(is.na(data$growth_fitted_log))
#resettest(growth ~ privo + lly + btot, data = data, power = 2:4)
sum(is.na(data$growth_fitted_2))
str(data)
#week4 ass
library(tidyverse)
library(foreign)
library(plm)
library(lmtest)
data <- read.dta('FIG.dta')
data <- pdata.frame(data, index = c('country', 'period'))
ols_regr <- plm(growth ~ privo + lly + btot, data = data)
summary(ols_regr)
attributes(ols_regr)
growth_fitted <- ols_regr$coefficients[1] * data$privo +  ols_regr$coefficients[2] * data$lly +
ols_regr$coefficients[3] * data$btot
data <- data.frame(data)
data <- cbind(data, growth_fitted)
data$growth_fitted_2 <- data$growth_fitted^2
data$growth_fitted_3 <- data$growth_fitted^3
data$growth_fitted_4 <- data$growth_fitted^4
data$growth_fitted_5 <- data$growth_fitted^5
data$growth_fitted_6 <- data$growth_fitted^6
data$growth_fitted_log <- log(data$growth_fitted + 100)
data <- pdata.frame(data, index = c('country', 'period'))
reset_regr <- plm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
reset_regr <- lm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
data$growth_fitted_log <- log(data$growth_fitted)
data$growth_fitted_log <- log(data$growth_fitted+1)
data <- pdata.frame(data, index = c('country', 'period'))
reset_regr <- lm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
reset_regr <- plm(growth ~ privo + lly + btot + growth_fitted_2 +
growth_fitted_3 + growth_fitted_4 +
growth_fitted_5 + growth_fitted_6 +
growth_fitted_log, data = data)
summary(reset_regr)
resettest(growth ~ privo + lly + btot, data = data, power = 2:4)
View(data)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
#week4 ass
library(tidyverse)
library(foreign)
library(plm)
#week4 ass
library(tidyverse)
library(foreign)
library(plm)
library(lmtest)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
fig <- read.dta('FIG.dta')
##### Panel regression
fig_panel <- pdata.frame(fig, index=c('country', 'period'))
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby, data=fig_panel)
summary(panel_regression)
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby + school + gov + log1p(pi) + log1p(bmp), data=fig_panel)
betas <- coef(panel_regression)
lly_fitted <- fig_panel[,'lly'] * betas[1]
btot_fitted <- fig_panel[,'btot'] * betas[2]
privo_fitted <- fig_panel[,'privo'] * betas[3]
growth_fitted <- lly_fitted + btot_fitted + privo_fitted
resettest(growth ~ log(lly) + log(btot) + log(privo) + log(dby), power = 2:5, data = fig_panel, type = c('fitted'))
##### Panel regression
fig_panel <- pdata.frame(fig, index=c('country', 'period'))
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby, data=fig_panel)
summary(panel_regression)
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby + school + gov + log1p(pi) + log1p(bmp), data=fig_panel)
summary(panel_regression)
summary(panel_regression)
summary(panel_regression, vcov = vcovHC)
log(10)
log(e)
log(2.7)
log1p(1.7)
attributes(panel_regression)
panel_regression$residuals
residuals <- panel_regression$residuals
lag.plot(residuals, lags = 1)
lag.plot(residuals, lags = 1, plot = 'l')
lag.plot(residuals, lags = 1, type = 'l')
plot(residuals)
plot(residuals, type='l')
#week4 ass
library(tidyverse)
library(foreign)
library(plm)
library(lmtest)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
fig <- read.dta('FIG.dta')
##### Panel regression
fig_panel <- pdata.frame(fig, index=c('country', 'period'))
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby, data = fig_panel)
summary(panel_regression)
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby + school + gov + log1p(pi) + log1p(bmp), data = fig_panel)
summary(panel_regression)
attributes(panel_regression)
residuals <- panel_regression$residuals
plot(residuals, type='l')
summary(panel_regression, vcov = vcovHC)
#week4 ass
library(tidyverse)
library(foreign)
library(plm)
library(lmtest)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
fig <- read.dta('FIG.dta')
##### Panel regression
fig_panel <- pdata.frame(fig, index=c('country', 'period'))
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby, data = fig_panel)
summary(panel_regression)
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby + school + gov + log1p(pi) + log1p(bmp), data = fig_panel)
summary(panel_regression)
attributes(panel_regression)
residuals <- panel_regression$residuals
plot(residuals, type='l')
summary(panel_regression, vcov = vcovHC)
hist(residuals)
hist(residuals, bins = 20)
hist(residuals, breaks = 20)
library(foreign)
library(plm)
library(dummies)
library(dplyr)
library(tibble)
library(stringr)
gravity <- read.dta("gravity.dta")
# Exercise 1
regr1 <- lm(gravity$ltrade ~ gravity$fta)
summary(regr1)
# Exercise 2
regr2 <- lm(ltrade ~ fta + lgdp + ldist, data = gravity)
summary(regr2)
# Exercise 3
dummies3 <- dummy(gravity$pairid)[, - 1]
regr3 <- lm(ltrade ~ fta + lgdp + dummies3, data = gravity)
summary(regr3)
# Exercise 4
mean_ltrade <- gravity %>% select(pairid, ltrade) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_lgdp <- gravity %>% select(pairid, lgdp) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_ldist <- gravity %>% select(pairid, ldist) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_fta <- gravity %>% select(pairid, fta) %>%
group_by(pairid) %>% summarise_all(funs(mean))
means_4 <- bind_cols(mean_ltrade, mean_lgdp %>% select(lgdp), mean_ldist %>% select(ldist),
mean_fta %>% select(fta))
gravity_4 <- left_join(gravity, means_4, by = "pairid") %>%
mutate(new_ltrade = ltrade.x - ltrade.y,
new_lgdp = lgdp.x - lgdp.y,
new_ldist = ldist.x - ldist.y,
new_fta = fta.x - fta.y)
regr4 <- lm(new_ltrade ~ new_fta + new_lgdp + new_ldist, data = gravity_4)
summary(regr4)
# Exercise 5
gravity_5 <- pdata.frame(gravity, index = c('pairid', 'year'))
regr5 <- plm(ltrade ~ fta + lgdp, data = gravity_5, model = "within", effect = "individual")
summary(regr5)
# Exercise 6
dummies6 <- dummy(gravity$year)[, - 1]
regr6 <- lm(ltrade ~ fta + lgdp + dummies6 + dummies3, data = gravity)
summary(regr6)
# Exercise 7
regr7 <- plm(ltrade ~ fta + lgdp + dummies6, data = gravity_5,
model = "within", effect = "individual")
summary(regr7)
# Exercise 8
summary(regr7, vcov = function(x) vcovHC(x, cluster = 'group'))
# Exercise 9
res_9 <- regr7$residuals
plot(res_9[str_detect(names(regr7$residuals), '^3-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^4-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^5-')], type = "l")
gravity_9_0 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 0) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
gravity_9_1 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 1) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
# Exercise 10
t <- matrix(0, nrow = 6156, ncol = 170)
for (i in 2:171) {
t[(1 + (i - 1) * 36):(i * 36), (i - 1)] <- unique(gravity$year)
}
regr10 <- plm(ltrade ~ fta + lgdp + dummies6 + t, data = gravity_5,
model = "within", effect = "individual")
summary(regr10)
# Exercise 11
res_11 <- regr10$residuals
plot(res_11[str_detect(names(regr10$residuals), '^3-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^4-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^5-')], type = "l")
gravity_11_0 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 0) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
gravity_11_1 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 1) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
# Exercise 12
lagged_res <- res_11[-1]
res_12 <- res_11[-6156]
regr12 <- lm(res_12 ~ lagged_res)
library(foreign)
library(plm)
library(dummies)
library(dplyr)
library(tibble)
library(stringr)
gravity <- read.dta("gravity.dta")
# Exercise 1
regr1 <- lm(gravity$ltrade ~ gravity$fta)
summary(regr1)
# Exercise 2
regr2 <- lm(ltrade ~ fta + lgdp + ldist, data = gravity)
summary(regr2)
# Exercise 3
dummies3 <- dummy(gravity$pairid)[, - 1]
regr3 <- lm(ltrade ~ fta + lgdp + dummies3, data = gravity)
summary(regr3)
# Exercise 4
mean_ltrade <- gravity %>% select(pairid, ltrade) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_lgdp <- gravity %>% select(pairid, lgdp) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_ldist <- gravity %>% select(pairid, ldist) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_fta <- gravity %>% select(pairid, fta) %>%
group_by(pairid) %>% summarise_all(funs(mean))
means_4 <- bind_cols(mean_ltrade, mean_lgdp %>% select(lgdp), mean_ldist %>% select(ldist),
mean_fta %>% select(fta))
gravity_4 <- left_join(gravity, means_4, by = "pairid") %>%
mutate(new_ltrade = ltrade.x - ltrade.y,
new_lgdp = lgdp.x - lgdp.y,
new_ldist = ldist.x - ldist.y,
new_fta = fta.x - fta.y)
regr4 <- lm(new_ltrade ~ new_fta + new_lgdp + new_ldist, data = gravity_4)
summary(regr4)
# Exercise 5
gravity_5 <- pdata.frame(gravity, index = c('pairid', 'year'))
regr5 <- plm(ltrade ~ fta + lgdp, data = gravity_5, model = "within", effect = "individual")
summary(regr5)
# Exercise 6
dummies6 <- dummy(gravity$year)[, - 1]
regr6 <- lm(ltrade ~ fta + lgdp + dummies6 + dummies3, data = gravity)
summary(regr6)
# Exercise 7
regr7 <- plm(ltrade ~ fta + lgdp + dummies6, data = gravity_5,
model = "within", effect = "individual")
summary(regr7)
# Exercise 8
summary(regr7, vcov = function(x) vcovHC(x, cluster = 'group'))
# Exercise 9
res_9 <- regr7$residuals
plot(res_9[str_detect(names(regr7$residuals), '^3-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^4-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^5-')], type = "l")
gravity_9_0 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 0) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
gravity_9_1 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 1) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
# Exercise 10
t <- matrix(0, nrow = 6156, ncol = 170)
for (i in 2:171) {
t[(1 + (i - 1) * 36):(i * 36), (i - 1)] <- unique(gravity$year)
}
regr10 <- plm(ltrade ~ fta + lgdp + dummies6 + t, data = gravity_5,
model = "within", effect = "individual")
summary(regr10)
# Exercise 11
res_11 <- regr10$residuals
plot(res_11[str_detect(names(regr10$residuals), '^3-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^4-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^5-')], type = "l")
gravity_11_0 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 0) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
gravity_11_1 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 1) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
# Exercise 12
lagged_res <- res_11[-1]
res_12 <- res_11[-6156]
regr12 <- lm(res_12 ~ lagged_res)
library(foreign)
library(plm)
library(dummies)
library(dplyr)
library(tibble)
library(stringr)
gravity <- read.dta("gravity.dta")
# Exercise 1
regr1 <- lm(gravity$ltrade ~ gravity$fta)
summary(regr1)
# Exercise 2
regr2 <- lm(ltrade ~ fta + lgdp + ldist, data = gravity)
summary(regr2)
# Exercise 3
dummies3 <- dummy(gravity$pairid)[, - 1]
regr3 <- lm(ltrade ~ fta + lgdp + dummies3, data = gravity)
summary(regr3)
# Exercise 4
mean_ltrade <- gravity %>% select(pairid, ltrade) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_lgdp <- gravity %>% select(pairid, lgdp) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_ldist <- gravity %>% select(pairid, ldist) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_fta <- gravity %>% select(pairid, fta) %>%
group_by(pairid) %>% summarise_all(funs(mean))
means_4 <- bind_cols(mean_ltrade, mean_lgdp %>% select(lgdp), mean_ldist %>% select(ldist),
mean_fta %>% select(fta))
gravity_4 <- left_join(gravity, means_4, by = "pairid") %>%
mutate(new_ltrade = ltrade.x - ltrade.y,
new_lgdp = lgdp.x - lgdp.y,
new_ldist = ldist.x - ldist.y,
new_fta = fta.x - fta.y)
regr4 <- lm(new_ltrade ~ new_fta + new_lgdp + new_ldist, data = gravity_4)
summary(regr4)
# Exercise 5
gravity_5 <- pdata.frame(gravity, index = c('pairid', 'year'))
regr5 <- plm(ltrade ~ fta + lgdp, data = gravity_5, model = "within", effect = "individual")
summary(regr5)
# Exercise 6
dummies6 <- dummy(gravity$year)[, - 1]
regr6 <- lm(ltrade ~ fta + lgdp + dummies6 + dummies3, data = gravity)
summary(regr6)
# Exercise 7
regr7 <- plm(ltrade ~ fta + lgdp + dummies6, data = gravity_5,
model = "within", effect = "individual")
summary(regr7)
# Exercise 8
summary(regr7, vcov = function(x) vcovHC(x, cluster = 'group'))
# Exercise 9
res_9 <- regr7$residuals
plot(res_9[str_detect(names(regr7$residuals), '^3-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^4-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^5-')], type = "l")
gravity_9_0 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 0) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
gravity_9_1 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 1) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
# Exercise 10
t <- matrix(0, nrow = 6156, ncol = 170)
for (i in 2:171) {
t[(1 + (i - 1) * 36):(i * 36), (i - 1)] <- unique(gravity$year)
}
regr10 <- plm(ltrade ~ fta + lgdp + dummies6 + t, data = gravity_5,
model = "within", effect = "individual")
summary(regr10)
# Exercise 11
res_11 <- regr10$residuals
plot(res_11[str_detect(names(regr10$residuals), '^3-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^4-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^5-')], type = "l")
gravity_11_0 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 0) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
gravity_11_1 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 1) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
# Exercise 12
lagged_res <- res_11[-1]
res_12 <- res_11[-6156]
library(foreign)
library(plm)
library(dummies)
library(dplyr)
library(tibble)
library(stringr)
gravity <- read.dta("gravity.dta")
# Exercise 1
regr1 <- lm(gravity$ltrade ~ gravity$fta)
summary(regr1)
# Exercise 2
regr2 <- lm(ltrade ~ fta + lgdp + ldist, data = gravity)
summary(regr2)
# Exercise 3
dummies3 <- dummy(gravity$pairid)[, - 1]
regr3 <- lm(ltrade ~ fta + lgdp + dummies3, data = gravity)
summary(regr3)
# Exercise 4
mean_ltrade <- gravity %>% select(pairid, ltrade) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_lgdp <- gravity %>% select(pairid, lgdp) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_ldist <- gravity %>% select(pairid, ldist) %>%
group_by(pairid) %>% summarise_all(funs(mean))
mean_fta <- gravity %>% select(pairid, fta) %>%
group_by(pairid) %>% summarise_all(funs(mean))
means_4 <- bind_cols(mean_ltrade, mean_lgdp %>% select(lgdp), mean_ldist %>% select(ldist),
mean_fta %>% select(fta))
gravity_4 <- left_join(gravity, means_4, by = "pairid") %>%
mutate(new_ltrade = ltrade.x - ltrade.y,
new_lgdp = lgdp.x - lgdp.y,
new_ldist = ldist.x - ldist.y,
new_fta = fta.x - fta.y)
regr4 <- lm(new_ltrade ~ new_fta + new_lgdp + new_ldist, data = gravity_4)
summary(regr4)
# Exercise 5
gravity_5 <- pdata.frame(gravity, index = c('pairid', 'year'))
regr5 <- plm(ltrade ~ fta + lgdp, data = gravity_5, model = "within", effect = "individual")
summary(regr5)
# Exercise 6
dummies6 <- dummy(gravity$year)[, - 1]
regr6 <- lm(ltrade ~ fta + lgdp + dummies6 + dummies3, data = gravity)
summary(regr6)
# Exercise 7
regr7 <- plm(ltrade ~ fta + lgdp + dummies6, data = gravity_5,
model = "within", effect = "individual")
summary(regr7)
# Exercise 8
summary(regr7, vcov = function(x) vcovHC(x, cluster = 'group'))
# Exercise 9
res_9 <- regr7$residuals
plot(res_9[str_detect(names(regr7$residuals), '^3-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^4-')], type = "l")
plot(res_9[str_detect(names(regr7$residuals), '^5-')], type = "l")
gravity_9_0 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 0) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
gravity_9_1 <- as.tibble(add_column(gravity, res_9) %>% filter(emu == 1) %>%
select(year, res_9)) %>% group_by(year) %>% summarise(mean(res_9))
# Exercise 10
t <- matrix(0, nrow = 6156, ncol = 170)
for (i in 2:171) {
t[(1 + (i - 1) * 36):(i * 36), (i - 1)] <- unique(gravity$year)
}
regr10 <- plm(ltrade ~ fta + lgdp + dummies6 + t, data = gravity_5,
model = "within", effect = "individual")
summary(regr10)
# Exercise 11
res_11 <- regr10$residuals
plot(res_11[str_detect(names(regr10$residuals), '^3-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^4-')], type = "l")
plot(res_11[str_detect(names(regr10$residuals), '^5-')], type = "l")
gravity_11_0 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 0) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
gravity_11_1 <- as.tibble(add_column(gravity, res_11) %>% filter(emu == 1) %>%
select(year, res_11)) %>% group_by(year) %>% summarise(mean(res_11))
# Exercise 12
lagged_res <- res_11[-1]
res_12 <- res_11[-6156]
library(foreign)
library(plm)
library(dummies)
library(dplyr)
library(tibble)
library(stringr)
gravity <- read.dta("gravity.dta")
# Exercise 1
regr1 <- lm(gravity$ltrade ~ gravity$fta)
summary(regr1)
fig <- data.frame(fig_panel)
#week4 ass
library(tidyverse)
library(foreign)
library(plm)
library(lmtest)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
fig <- read.dta('FIG.dta')
##### Panel regression
fig_panel <- pdata.frame(fig, index=c('country', 'period'))
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby, data = fig_panel)
summary(panel_regression)
panel_regression <- plm(growth ~ (lly + btot + privo) + dby + log(initial) + log(initial) * lly + log(initial) * btot +
log(initial) * privo + log(initial) * dby + school + gov + log1p(pi) + log1p(bmp), data = fig_panel)
summary(panel_regression)
attributes(panel_regression)
residuals <- panel_regression$residuals
plot(residuals, type='l')
hist(residuals, breaks = 20)
fig <- data.frame(fig_panel)
fig <- cbind(fig, residuals)
